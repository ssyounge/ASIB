# configs/experiment/ablation_full.yaml
# Phase 1.1 (5) ASIB Full: Progressive Partial Freezing 효과 검증
# 모든 ASIB 구성 요소를 포함한 완전한 프레임워크

defaults:
  - /base
  - /model/teacher@experiment.teacher1: convnext_s
  - /model/teacher@experiment.teacher2: resnet152
  - /model/student@experiment.model.student: resnet50_scratch
  - _self_

experiment:
  results_dir: experiments/ablation/full/results
  exp_id: ablation_full
  teacher1_ckpt: checkpoints/teachers/convnext_s_cifar100.pth
  teacher2_ckpt: checkpoints/teachers/resnet152_cifar100.pth

  dataset:
    batch_size: 128
    num_workers: 4

  num_stages: 2
  student_epochs_per_stage: [15, 15]
  teacher_adapt_epochs: 10
  use_partial_freeze: false
  use_teacher_finetuning: true

  use_amp: true
  amp_dtype: bfloat16

  use_ib: true
  ib_epochs_per_stage: 5
  ib_beta: 0.005
  ib_beta_warmup_epochs: 3
  use_vib_synergy_head: false

  ib_mbm_query_dim: 2048
  ib_mbm_out_dim: 512
  ib_mbm_n_head: 4
  ib_mbm_feature_norm: l2

  use_cccp: true
  cccp_alpha: 0.5
  tau: 4.0
  cccp_nt: 1
  cccp_ns: 1

  use_ensemble: true
  use_hybrid: true

  a_step_lr: 0.001
  a_step_weight_decay: 0.0001
  b_step_lr: 0.05
  b_step_weight_decay: 0.0003
  b_step_momentum: 0.9
  b_step_nesterov: true
  grad_clip_norm: 1.0

  ce_alpha: 0.3
  kd_ens_alpha: 0.0
  hybrid_beta: 0.0 