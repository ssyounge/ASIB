# configs/experiment/res152_effi_l2.yaml

#──────────────────────────────────────────────────────────
#  ResNet‑152  (Teacher‑1)
#  EfficientNet‑L2 (Teacher‑2)
#  Student → ResNet‑152 (pre‑trained, freeze L4)
#──────────────────────────────────────────────────────────
defaults:
  - /base
  - override /dataset: cifar100

  # ── 교사 두 명을 alias 로 불러오기 ───────────────────
  - override /model/teacher@teacher1: resnet152        # ← 기존 파일 그대로 재사용
  - override /model/teacher@teacher2: efficientnet_l2  # ← 기존 파일 그대로 재사용

  # ── 학생, 방법, 스케줄 ───────────────────────────────
  - override /model/student:  resnet152_pretrain
  - override /method: asmb
  - override /schedule: cosine
  - _self_

# ──────────────────────────────────────────────────────────
#  추가 override (필요한 것만)
# ──────────────────────────────────────────────────────────
teacher1_ckpt: checkpoints/resnet152_cifar32.pth
teacher2_ckpt: checkpoints/efficientnet_l2_cifar32.pth

teacher1_small_input: true
teacher2_small_input: true

# Student
student_freeze_level: -1
# -1=off / 0=head / 1=layer4 / 2=layer3+4

# ASMB
num_stages: 3
batch_size: 128
use_distillation_adapter: true
distill_out_dim: 512
mbm_query_dim: 5504         # resnet152 feat_2d 크기

# 결과 경로
results_dir: outputs/res152_effi_l2
exp_id:      res152_effi_l2
