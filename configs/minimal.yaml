# configs/minimal.yaml

batch_size: 128              # â†‘ ê°€ëŠ¥í•˜ë©´ 256 (GPU ì—¬ìœ  ì‹œ)
num_workers: 2
disable_tqdm: true
dataset_root: "./data"
results_dir: "results"
device: "cuda"
seed: 42
checkpoint_dir: "checkpoints"

student_type: "convnext_tiny"

# â”€ IBâ€‘KD í•˜ì´í¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mbm_type: "VIB"
# â”€ Latent ìš©ëŸ‰ â†‘ â”€
z_dim: 512

# â”€ Student Proj MLP â”€
proj_hidden_dim: 1024   # NEW
proj_use_bn: true

beta_bottleneck: 0.003       # IBÂ KLÂ ê°€ì¤‘ì¹˜
kd_alpha_init: 0.6          # KD ì´ˆë°˜ ê°€ì¤‘ì¹˜
kd_alpha_final: 0.15         # KD í›„ë°˜ ê°€ì¤‘ì¹˜
kd_T_init: 5                # ì´ˆê¸° ì˜¨ë„
kd_T_final: 1.5               # ìµœì¢… ì˜¨ë„
kd_warmup_frac: 0.10         # ì•ë¶€ë¶„ ìŠ¤ì¼€ì¤„ ê³ ì • ë¹„ìœ¨
kd_schedule_granularity: "step"
kd_sched_pow: 2.0            # KD ìŠ¤ì¼€ì¤„ ì§€ìˆ˜(p)
ce_alpha: 1.0                # ğŸ”¸ CEÂ ê·¸ëŒ€ë¡œ
latent_alpha: 0.6            # zâ€‘MSE ê°€ì¤‘ì¹˜ â†‘
label_smoothing: 0.05         # ğŸ”¹ CEÂ ì•ˆì •í™”
randaug_N: 2                 # ğŸ”¹ RandAug(N,M)
randaug_M: 7
 
teacher_weight_decay: 5e-4
student_weight_decay: 5e-4
teacher_lr: 1e-3        # MBM Adam LR â†‘
student_lr: 5e-4
lr_schedule: "cosine"
grad_clip_norm: 1.0

# run evaluation after training loop by default
eval_after_train: true

# â”€ DataÂ Mixing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mixup_alpha: 0.4             # CutMixÂ ëŒ€ì‹  MixUpÂ ê²½ëŸ‰ ì‚¬ìš©
cutmix_alpha_distill: 0.0    # (0Â =Â MixUpÂ ìš°ì„ )
 
# â”€ í•™ìŠµ ìŠ¤í…Œì´ì§€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

teacher_iters: 20       # MBM ë” í•™ìŠµ
student_iters: 60       # ì¡°ê¸° ìˆ˜ë ´

# â”€ EMA í‰ê°€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
use_ema: true
ema_decay: 0.992

# --- Teacher fineâ€‘tune ---
finetune_epochs: 20
finetune_lr: 5e-4
finetune_weight_decay: 1e-5
teacher2_freeze_scope: "none"
